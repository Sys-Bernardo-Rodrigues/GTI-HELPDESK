{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///F:/GITHUB%20-%20REPOSITORIOS/GTI-HELPDESK/src/lib/dom.ts"],"sourcesContent":["/**\n * Safely removes a target <div> from the DOM while minimizing layout shifts.\n * - Verifies existence and connectivity in the document\n * - Clears inline event handlers and dataset on the element and its descendants\n * - Removes all child nodes\n * - Replaces the element position with a hidden spacer to preserve layout\n * - Removes the element node and returns true if it no longer exists in the DOM\n *\n * Returns false on invalid input or if removal fails.\n */\nexport function removeDivElement(div: HTMLDivElement | null): boolean {\n  try {\n    if (!div || !(div instanceof HTMLDivElement)) return false;\n\n    // 1) Verify element exists in document (or at least is attached somewhere)\n    const parent = div.parentNode as (Node & ParentNode) | null;\n    if (!parent) return false;\n\n    // 2) Attempt to clear inline event handlers for the element and descendants\n    const clearInlineHandlers = (el: Element) => {\n      const propNames = [\n        \"onclick\",\"onchange\",\"oninput\",\"onkeydown\",\"onkeyup\",\"onkeypress\",\n        \"onmousedown\",\"onmouseup\",\"onmouseenter\",\"onmouseleave\",\"onmousemove\",\n        \"onfocus\",\"onblur\",\"onsubmit\",\"onreset\",\"onwheel\",\"ontouchstart\",\n        \"ontouchend\",\"ontouchmove\",\"onpointerdown\",\"onpointerup\",\"onpointermove\",\n      ];\n      for (const p of propNames) {\n        // @ts-expect-error - assigning to event handler properties\n        (el as any)[p] = null;\n        if (p.startsWith(\"on\")) el.removeAttribute(p);\n      }\n      const he = el as HTMLElement;\n      if (he && he.dataset) {\n        for (const k of Object.keys(he.dataset)) {\n          // @ts-expect-error - deleting dataset keys is fine here for cleanup intent\n          delete he.dataset[k];\n        }\n      }\n    };\n\n    const walker = document.createTreeWalker(div, NodeFilter.SHOW_ELEMENT);\n    // Clear on the root as well\n    clearInlineHandlers(div);\n    // And for all descendants\n    while (walker.nextNode()) {\n      const node = walker.currentNode as Element;\n      clearInlineHandlers(node);\n    }\n\n    // 3) Remove all children (robust fallback for older engines)\n    while (div.firstChild) {\n      const child = div.firstChild;\n      div.removeChild(child);\n    }\n\n    // Preserve layout with a hidden spacer of the same block size\n    const computed = window.getComputedStyle(div);\n    const spacer = document.createElement(\"div\");\n    spacer.setAttribute(\"aria-hidden\", \"true\");\n    const height = div.offsetHeight; // includes padding/border\n    spacer.style.visibility = \"hidden\";\n    spacer.style.pointerEvents = \"none\";\n    spacer.style.height = `${height}px`;\n    spacer.style.marginTop = computed.marginTop;\n    spacer.style.marginBottom = computed.marginBottom;\n    spacer.style.marginLeft = computed.marginLeft;\n    spacer.style.marginRight = computed.marginRight;\n    spacer.style.display = computed.display || \"block\";\n\n    // 4) Perform actual removal by replacing node with spacer (drops event listeners too)\n    parent.replaceChild(spacer, div);\n\n    // 5) Verify removal\n    const removed = !document.contains(div);\n    return removed;\n  } catch {\n    return false;\n  }\n}"],"names":[],"mappings":"AAAA;;;;;;;;;CASC;;;;AACM,SAAS,iBAAiB,GAA0B;IACzD,IAAI;QACF,IAAI,CAAC,OAAO,CAAC,CAAC,eAAe,cAAc,GAAG,OAAO;QAErD,2EAA2E;QAC3E,MAAM,SAAS,IAAI,UAAU;QAC7B,IAAI,CAAC,QAAQ,OAAO;QAEpB,4EAA4E;QAC5E,MAAM,sBAAsB,CAAC;YAC3B,MAAM,YAAY;gBAChB;gBAAU;gBAAW;gBAAU;gBAAY;gBAAU;gBACrD;gBAAc;gBAAY;gBAAe;gBAAe;gBACxD;gBAAU;gBAAS;gBAAW;gBAAU;gBAAU;gBAClD;gBAAa;gBAAc;gBAAgB;gBAAc;aAC1D;YACD,KAAK,MAAM,KAAK,UAAW;gBACzB,2DAA2D;gBAC1D,EAAU,CAAC,EAAE,GAAG;gBACjB,IAAI,EAAE,UAAU,CAAC,OAAO,GAAG,eAAe,CAAC;YAC7C;YACA,MAAM,KAAK;YACX,IAAI,MAAM,GAAG,OAAO,EAAE;gBACpB,KAAK,MAAM,KAAK,OAAO,IAAI,CAAC,GAAG,OAAO,EAAG;oBACvC,2EAA2E;oBAC3E,OAAO,GAAG,OAAO,CAAC,EAAE;gBACtB;YACF;QACF;QAEA,MAAM,SAAS,SAAS,gBAAgB,CAAC,KAAK,WAAW,YAAY;QACrE,4BAA4B;QAC5B,oBAAoB;QACpB,0BAA0B;QAC1B,MAAO,OAAO,QAAQ,GAAI;YACxB,MAAM,OAAO,OAAO,WAAW;YAC/B,oBAAoB;QACtB;QAEA,6DAA6D;QAC7D,MAAO,IAAI,UAAU,CAAE;YACrB,MAAM,QAAQ,IAAI,UAAU;YAC5B,IAAI,WAAW,CAAC;QAClB;QAEA,8DAA8D;QAC9D,MAAM,WAAW,OAAO,gBAAgB,CAAC;QACzC,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,OAAO,YAAY,CAAC,eAAe;QACnC,MAAM,SAAS,IAAI,YAAY,EAAE,0BAA0B;QAC3D,OAAO,KAAK,CAAC,UAAU,GAAG;QAC1B,OAAO,KAAK,CAAC,aAAa,GAAG;QAC7B,OAAO,KAAK,CAAC,MAAM,GAAG,GAAG,OAAO,EAAE,CAAC;QACnC,OAAO,KAAK,CAAC,SAAS,GAAG,SAAS,SAAS;QAC3C,OAAO,KAAK,CAAC,YAAY,GAAG,SAAS,YAAY;QACjD,OAAO,KAAK,CAAC,UAAU,GAAG,SAAS,UAAU;QAC7C,OAAO,KAAK,CAAC,WAAW,GAAG,SAAS,WAAW;QAC/C,OAAO,KAAK,CAAC,OAAO,GAAG,SAAS,OAAO,IAAI;QAE3C,sFAAsF;QACtF,OAAO,YAAY,CAAC,QAAQ;QAE5B,oBAAoB;QACpB,MAAM,UAAU,CAAC,SAAS,QAAQ,CAAC;QACnC,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///F:/GITHUB%20-%20REPOSITORIOS/GTI-HELPDESK/src/app/profile/ProfileClient.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useMemo, useState, useRef } from \"react\";\nimport type { AuthUser } from \"@/lib/auth\";\nimport { removeDivElement } from \"@/lib/dom\";\n\ntype Props = { initialUser: AuthUser };\n\ntype ProfileData = {\n  name: string;\n  email: string;\n  phone: string;\n  jobTitle: string;\n  company: string;\n  account: {\n    twoFactor: boolean;\n    newsletter: boolean;\n  };\n  avatarUrl?: string;\n  discordTag?: string;\n  phoneVerified?: boolean;\n  pendingEmail?: string;\n  emailVerifiedAt?: string | null;\n};\n\nfunction sanitize(input: string) {\n  // Minimal XSS guard: strip angle brackets and control chars; React escapes output too\n  return input.replace(/[<>\\u0000-\\u001F\\u007F]/g, \"\");\n}\n\nexport default function ProfileClient({ initialUser }: Props) {\n  const storageKey = useMemo(() => `profile:draft:${initialUser.id}`, [initialUser.id]);\n  const [saving, setSaving] = useState(false);\n  const [savedMsg, setSavedMsg] = useState<string | null>(null);\n  const [errorMsg, setErrorMsg] = useState<string | null>(null);\n  const [mounted, setMounted] = useState(false);\n  const [baseline, setBaseline] = useState<ProfileData | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const timeouts = useRef<number[]>([]);\n  const scheduleClearSaved = (ms: number) => {\n    const id = window.setTimeout(() => setSavedMsg(null), ms);\n    timeouts.current.push(id);\n  };\n  // States for new per-section flows\n  const [savingName, setSavingName] = useState(false);\n  const [savingEmail, setSavingEmail] = useState(false);\n  const [emailPendingMsg, setEmailPendingMsg] = useState<string | null>(null);\n  const [savingPassword, setSavingPassword] = useState(false);\n  const [savingPhone, setSavingPhone] = useState(false);\n  const [smsStep, setSmsStep] = useState<\"idle\" | \"sent\">(\"idle\");\n  const [smsCode, setSmsCode] = useState(\"\");\n  const [savingDiscord, setSavingDiscord] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\n  const [form, setForm] = useState<ProfileData>({\n    name: initialUser.name ?? \"\",\n    email: initialUser.email,\n    phone: \"\",\n    jobTitle: \"\",\n    company: \"\",\n    account: { twoFactor: false, newsletter: false },\n    avatarUrl: (initialUser as any).avatarUrl ?? \"\",\n    discordTag: \"\",\n    phoneVerified: false,\n    pendingEmail: \"\",\n    emailVerifiedAt: null,\n  });\n\n  useEffect(() => { setMounted(true); }, []);\n  useEffect(() => {\n    return () => {\n      // Cleanup any pending timers to avoid leaks\n      for (const id of timeouts.current.splice(0)) {\n        clearTimeout(id);\n      }\n    };\n  }, []);\n\n  // Remove the placeholder <div> safely after mount, preserving layout with spacer\n  useEffect(() => {\n    const el = document.querySelector<HTMLDivElement>(\".profile-form-placeholder\");\n    if (el) {\n      removeDivElement(el);\n    }\n  }, []);\n\n  // Load from API and restore draft from sessionStorage\n  useEffect(() => {\n    let cancelled = false;\n    (async () => {\n      try {\n        const res = await fetch(\"/api/profile\", { cache: \"no-store\" });\n        if (!res.ok) throw new Error(\"Falha ao buscar perfil\");\n        const data = (await res.json()) as ProfileData;\n        if (!cancelled) {\n          const draft = sessionStorage.getItem(storageKey);\n          const value = draft ? { ...data, ...JSON.parse(draft) } : data;\n          setForm(value);\n          setBaseline(value);\n        }\n      } catch (e) {\n        // Fallback to initial user\n        const draft = sessionStorage.getItem(storageKey);\n        if (!cancelled) {\n          setForm((prev) => draft ? { ...prev, ...JSON.parse(draft) } : prev);\n          setBaseline((prev) => prev ?? null);\n        }\n      }\n    })();\n    return () => { cancelled = true; };\n  }, [storageKey]);\n\n  // Persist draft within session (maintain state during navigation)\n  useEffect(() => {\n    sessionStorage.setItem(storageKey, JSON.stringify(form));\n  }, [form, storageKey]);\n\n  function setField<K extends keyof ProfileData>(key: K, value: ProfileData[K]) {\n    setForm((f) => ({ ...f, [key]: value }));\n  }\n\n  function onInput(e: React.ChangeEvent<HTMLInputElement>) {\n    const { name, value, type, checked } = e.target;\n    if (name === \"twoFactor\" || name === \"newsletter\") {\n      setForm((f) => ({ ...f, account: { ...f.account, [name]: checked } }));\n    } else {\n      setForm((f) => ({ ...f, [name]: sanitize(value) } as ProfileData));\n    }\n  }\n\n  function onCancel() {\n    if (baseline) {\n      setForm(baseline);\n      sessionStorage.setItem(storageKey, JSON.stringify(baseline));\n      setSavedMsg(\"Edição cancelada\");\n      scheduleClearSaved(1200);\n    }\n  }\n\n  async function onUploadAvatar(file: File) {\n    if (!file) return;\n    if (![\"image/png\", \"image/jpeg\", \"image/webp\"].includes(file.type)) {\n      setErrorMsg(\"Imagem deve ser PNG, JPG ou WEBP\");\n      return;\n    }\n    if (file.size > 2 * 1024 * 1024) {\n      setErrorMsg(\"Imagem excede 2MB\");\n      return;\n    }\n    setErrorMsg(null);\n    setUploading(true);\n    try {\n      const fd = new FormData();\n      fd.append(\"file\", file);\n      const res = await fetch(\"/api/profile/avatar\", { method: \"POST\", body: fd });\n      if (!res.ok) throw new Error(await res.text());\n      const data = await res.json();\n      setForm((f) => ({ ...f, avatarUrl: data.avatarUrl }));\n      setBaseline((b) => (b ? { ...b, avatarUrl: data.avatarUrl } : b));\n      setSavedMsg(\"Foto atualizada\");\n      scheduleClearSaved(1200);\n    } catch (err: any) {\n      setErrorMsg(typeof err?.message === \"string\" ? err.message : \"Falha ao enviar imagem\");\n    } finally {\n      setUploading(false);\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n    }\n  }\n\n  function validate(): string[] {\n    const errs: string[] = [];\n    if (!form.name.trim()) errs.push(\"Nome é obrigatório\");\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email)) errs.push(\"E-mail inválido\");\n    if (form.phone && !/^\\+?[0-9\\s().-]{7,}$/.test(form.phone)) errs.push(\"Telefone inválido\");\n    if (form.jobTitle.length > 80) errs.push(\"Cargo muito longo\");\n    if (form.company.length > 120) errs.push(\"Empresa muito longa\");\n    return errs;\n  }\n\n  async function onSave(e: React.FormEvent) {\n    e.preventDefault();\n    setSavedMsg(null);\n    setErrorMsg(null);\n    const errs = validate();\n    if (errs.length) {\n      setErrorMsg(errs.join(\"; \"));\n      return;\n    }\n    setSaving(true);\n    try {\n      const res = await fetch(\"/api/profile\", {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(form),\n      });\n      if (!res.ok) throw new Error(await res.text());\n      const data = (await res.json()) as ProfileData;\n      setForm(data);\n      setBaseline(data);\n      setSavedMsg(\"Alterações salvas\");\n      scheduleClearSaved(1500);\n    } catch (err: any) {\n      setErrorMsg(typeof err?.message === \"string\" ? err.message : \"Falha ao salvar\");\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  return (\n    <main className=\"profile-page\">\n      <h1 className=\"profile-title\">Meu Perfil</h1>\n\n      {/* Avatar + Upload */}\n      <section className=\"profile-avatar\">\n        <div className=\"avatar-preview\" aria-busy={uploading}>\n          {form.avatarUrl ? (\n            // eslint-disable-next-line @next/next/no-img-element\n            <img src={form.avatarUrl} alt=\"Foto de perfil\" />\n          ) : (\n            <div className=\"avatar-fallback\">{form.name?.[0] || form.email?.[0]}</div>\n          )}\n        </div>\n        <div className=\"avatar-actions\">\n          <label className=\"btn-secondary\">\n            Alterar foto\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/png,image/jpeg,image/webp\"\n              style={{ display: \"none\" }}\n              onChange={(e) => {\n                const file = e.target.files?.[0];\n                if (file) onUploadAvatar(file);\n              }}\n            />\n          </label>\n        </div>\n      </section>\n\n      {/* Form removido do DOM conforme solicitado. Mantemos um placeholder\n          para evitar deslocamentos visuais indesejados. */}\n      <div className=\"profile-form-placeholder\" aria-hidden=\"true\"></div>\n\n      {/* Seções com salvamento independente */}\n      <section className=\"profile-section\">\n        <h2>Nome completo</h2>\n        <div className=\"row\">\n          <input\n            aria-label=\"Nome completo\"\n            value={form.name}\n            onChange={(e) => {\n              const v = e.target.value.replace(/[^A-Za-zÀ-ÿ\\s]/g, \"\");\n              setForm((f) => ({ ...f, name: sanitize(v) }));\n            }}\n            maxLength={100}\n          />\n          <button\n            className=\"save-btn\"\n            disabled={savingName}\n            onClick={async () => {\n              const clean = form.name.trim();\n              if (clean.length < 2) {\n                setErrorMsg(\"Nome deve ter ao menos 2 caracteres\");\n                return;\n              }\n              setSavingName(true);\n              setErrorMsg(null);\n              try {\n                const res = await fetch(\"/api/profile\", {\n                  method: \"PUT\",\n                  headers: { \"Content-Type\": \"application/json\" },\n                  body: JSON.stringify({ ...form, name: clean }),\n                });\n                if (!res.ok) throw new Error(await res.text());\n                const data = (await res.json()) as ProfileData;\n                setForm(data);\n                setBaseline(data);\n                setSavedMsg(\"Nome atualizado\");\n                scheduleClearSaved(1200);\n              } catch (e: any) {\n                setErrorMsg(typeof e?.message === \"string\" ? e.message : \"Falha ao salvar nome\");\n              } finally {\n                setSavingName(false);\n              }\n            }}\n          >\n            {savingName ? \"Salvando...\" : \"Salvar\"}\n          </button>\n        </div>\n      </section>\n\n      <section className=\"profile-section\">\n        <h2>E-mail</h2>\n        <div className=\"row\">\n          <input\n            type=\"email\"\n            aria-label=\"E-mail\"\n            value={form.email}\n            onChange={(e) => setForm((f) => ({ ...f, email: sanitize(e.target.value) }))}\n          />\n          <button\n            className=\"save-btn\"\n            disabled={savingEmail}\n            onClick={async () => {\n              setSavingEmail(true);\n              setErrorMsg(null);\n              setEmailPendingMsg(null);\n              try {\n                const res = await fetch(\"/api/profile/email\", {\n                  method: \"PUT\",\n                  headers: { \"Content-Type\": \"application/json\" },\n                  body: JSON.stringify({ email: form.email }),\n                });\n                const data = await res.json();\n                if (!res.ok) throw new Error(data?.error || \"Falha ao iniciar confirmação\");\n                setEmailPendingMsg(\"Enviamos um link de confirmação para o novo e-mail.\");\n                // Para ambiente de dev, exibimos o link de verificação recebido\n                if (data?.verifyUrl) setEmailPendingMsg(`${emailPendingMsg ? emailPendingMsg + \" \" : \"\"}Link de verificação: ${data.verifyUrl}`);\n              } catch (e: any) {\n                setErrorMsg(typeof e?.message === \"string\" ? e.message : \"Falha ao salvar e-mail\");\n              } finally {\n                setSavingEmail(false);\n              }\n            }}\n          >\n            {savingEmail ? \"Enviando...\" : \"Salvar e enviar confirmação\"}\n          </button>\n        </div>\n        {emailPendingMsg && <small className=\"ok\">{emailPendingMsg}</small>}\n      </section>\n\n      <section className=\"profile-section\">\n        <h2>Alterar senha</h2>\n        <PasswordChanger onDone={(msg) => setSavedMsg(msg)} onError={(m) => setErrorMsg(m)} />\n      </section>\n\n      <section className=\"profile-section\">\n        <h2>Telefone</h2>\n        <div className=\"row\">\n          <input\n            type=\"tel\"\n            aria-label=\"Telefone\"\n            value={form.phone}\n            onChange={(e) => {\n              const digits = e.target.value.replace(/\\D/g, \"\");\n              let masked = digits;\n              if (digits.length >= 10) {\n                const d = digits.padEnd(11, \" \");\n                masked = digits.length === 11\n                  ? `(${d.slice(0, 2)}) ${d.slice(2, 7)}-${d.slice(7, 11).trim()}`\n                  : `(${d.slice(0, 2)}) ${d.slice(2, 6)}-${d.slice(6, 10).trim()}`;\n              }\n              setForm((f) => ({ ...f, phone: masked }));\n            }}\n            placeholder=\"(11) 99999-9999\"\n          />\n          <button\n            className=\"save-btn\"\n            disabled={savingPhone}\n            onClick={async () => {\n              setSavingPhone(true);\n              setErrorMsg(null);\n              try {\n                const res = await fetch(\"/api/profile/phone\", {\n                  method: \"PUT\",\n                  headers: { \"Content-Type\": \"application/json\" },\n                  body: JSON.stringify({ phone: form.phone }),\n                });\n                const data = await res.json();\n                if (!res.ok) throw new Error(data?.error || \"Falha ao salvar telefone\");\n                setForm((f) => ({ ...f, phone: data.phone, phoneVerified: data.phoneVerified }));\n                setSavedMsg(\"Telefone atualizado\");\n                scheduleClearSaved(1200);\n              } catch (e: any) {\n                setErrorMsg(typeof e?.message === \"string\" ? e.message : \"Falha ao salvar telefone\");\n              } finally {\n                setSavingPhone(false);\n              }\n            }}\n          >\n            {savingPhone ? \"Salvando...\" : \"Salvar\"}\n          </button>\n        </div>\n        <div className=\"row\">\n          <button\n            className=\"btn-secondary\"\n            onClick={async () => {\n              try {\n                const res = await fetch(\"/api/profile/phone/request-code\", { method: \"POST\" });\n                const data = await res.json();\n                if (!res.ok) throw new Error(data?.error || \"Falha ao enviar código\");\n                setSmsStep(\"sent\");\n                setSavedMsg(\"Código SMS enviado\");\n                scheduleClearSaved(1200);\n              } catch (e: any) {\n                setErrorMsg(typeof e?.message === \"string\" ? e.message : \"Falha ao enviar SMS\");\n              }\n            }}\n          >\n            Enviar código por SMS\n          </button>\n          {smsStep === \"sent\" && (\n            <>\n              <input\n                aria-label=\"Código SMS\"\n                placeholder=\"Código de 6 dígitos\"\n                value={smsCode}\n                onChange={(e) => setSmsCode(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\n              />\n              <button\n                className=\"btn-tertiary\"\n                onClick={async () => {\n                  try {\n                    const res = await fetch(\"/api/profile/phone/verify\", {\n                      method: \"POST\",\n                      headers: { \"Content-Type\": \"application/json\" },\n                      body: JSON.stringify({ code: smsCode }),\n                    });\n                    const data = await res.json();\n                    if (!res.ok) throw new Error(data?.error || \"Falha ao verificar\");\n                    setForm((f) => ({ ...f, phoneVerified: true }));\n                    setSmsStep(\"idle\");\n                    setSmsCode(\"\");\n                    setSavedMsg(\"Telefone verificado\");\n                    scheduleClearSaved(1200);\n                  } catch (e: any) {\n                    setErrorMsg(typeof e?.message === \"string\" ? e.message : \"Código inválido\");\n                  }\n                }}\n              >\n                Verificar código\n              </button>\n            </>\n          )}\n        </div>\n      </section>\n\n      <section className=\"profile-section\">\n        <h2>Discord</h2>\n        <div className=\"row\">\n          <input\n            aria-label=\"Usuário do Discord\"\n            placeholder=\"username#0000\"\n            value={form.discordTag || \"\"}\n            onChange={(e) => setForm((f) => ({ ...f, discordTag: sanitize(e.target.value) }))}\n          />\n          <button\n            className=\"save-btn\"\n            disabled={savingDiscord}\n            onClick={async () => {\n              setSavingDiscord(true);\n              setErrorMsg(null);\n              try {\n                const res = await fetch(\"/api/profile/discord\", {\n                  method: \"PUT\",\n                  headers: { \"Content-Type\": \"application/json\" },\n                  body: JSON.stringify({ discordTag: form.discordTag }),\n                });\n                const data = await res.json();\n                if (!res.ok) throw new Error(data?.error || \"Falha ao salvar Discord\");\n                setForm((f) => ({ ...f, discordTag: data.discordTag }));\n                setSavedMsg(\"Usuário do Discord atualizado\");\n                scheduleClearSaved(1200);\n              } catch (e: any) {\n                setErrorMsg(typeof e?.message === \"string\" ? e.message : \"Falha ao salvar Discord\");\n              } finally {\n                setSavingDiscord(false);\n              }\n            }}\n          >\n            {savingDiscord ? \"Salvando...\" : \"Salvar\"}\n          </button>\n        </div>\n      </section>\n    </main>\n  );\n}\n\nfunction PasswordChanger({ onDone, onError }: { onDone: (m: string) => void; onError: (m: string) => void }) {\n  const [currentPassword, setCurrent] = useState(\"\");\n  const [newPassword, setNew] = useState(\"\");\n  const [confirmPassword, setConfirm] = useState(\"\");\n  const [saving, setSaving] = useState(false);\n\n  function strongEnough(pw: string) {\n    return pw.length >= 8 && /\\d/.test(pw) && /[^A-Za-z0-9]/.test(pw);\n  }\n\n  return (\n    <div className=\"password-changer\">\n      <div className=\"row\">\n        <input type=\"password\" placeholder=\"Senha atual\" value={currentPassword} onChange={(e) => setCurrent(e.target.value)} />\n        <input type=\"password\" placeholder=\"Nova senha\" value={newPassword} onChange={(e) => setNew(e.target.value)} />\n        <input type=\"password\" placeholder=\"Confirmar nova senha\" value={confirmPassword} onChange={(e) => setConfirm(e.target.value)} />\n        <button\n          className=\"save-btn\"\n          disabled={saving}\n          onClick={async () => {\n            if (!strongEnough(newPassword)) {\n              onError(\"Senha fraca. Mínimo 8, com número e caractere especial\");\n              return;\n            }\n            if (newPassword !== confirmPassword) {\n              onError(\"A confirmação não confere\");\n              return;\n            }\n            setSaving(true);\n            try {\n              const res = await fetch(\"/api/profile/password\", {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ currentPassword, newPassword, confirmPassword }),\n              });\n              const data = await res.json();\n              if (!res.ok) throw new Error(data?.error || \"Falha ao alterar senha\");\n              setCurrent(\"\"); setNew(\"\"); setConfirm(\"\");\n              onDone(\"Senha alterada com sucesso\");\n            } catch (e: any) {\n              onError(typeof e?.message === \"string\" ? e.message : \"Falha ao alterar senha\");\n            } finally {\n              setSaving(false);\n            }\n          }}\n        >\n          {saving ? \"Salvando...\" : \"Salvar\"}\n        </button>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 970, "column": 0}, "map": {"version":3,"sources":["file:///F:/GITHUB%20-%20REPOSITORIOS/GTI-HELPDESK/src/app/home/LogoutButton.tsx"],"sourcesContent":["\"use client\";\n\nexport default function LogoutButton() {\n  const handleLogout = async () => {\n    try {\n      await fetch(\"/api/logout\", { method: \"POST\" });\n      window.location.href = \"/\";\n    } catch (error) {\n      console.error(\"Erro ao fazer logout:\", error);\n      // Mesmo com erro, redireciona para a página de login\n      window.location.href = \"/\";\n    }\n  };\n\n  return (\n    <button className=\"logout\" onClick={handleLogout}>\n      Sair\n    </button>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS;IACtB,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,MAAM,eAAe;gBAAE,QAAQ;YAAO;YAC5C,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,qDAAqD;YACrD,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF;IAEA,qBACE,8OAAC;QAAO,WAAU;QAAS,SAAS;kBAAc;;;;;;AAItD","debugId":null}},
    {"offset": {"line": 1004, "column": 0}, "map": {"version":3,"sources":["file:///F:/GITHUB%20-%20REPOSITORIOS/GTI-HELPDESK/src/app/home/HeaderBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport LogoutButton from \"./LogoutButton\";\nimport type { AuthUser } from \"@/lib/auth\";\n\ntype Props = { user: AuthUser };\n\nexport default function HeaderBar({ user }: Props) {\n  const [open, setOpen] = useState(false);\n  const router = useRouter();\n\n  const toggle = useCallback(() => setOpen((v) => !v), []);\n  const close = useCallback(() => setOpen(false), []);\n\n  useEffect(() => {\n    const onKey = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") close();\n    };\n    window.addEventListener(\"keydown\", onKey);\n    return () => window.removeEventListener(\"keydown\", onKey);\n  }, [close]);\n\n  useEffect(() => {\n    const onResize = () => {\n      if (window.innerWidth >= 768) close();\n    };\n    window.addEventListener(\"resize\", onResize);\n    return () => window.removeEventListener(\"resize\", onResize);\n  }, [close]);\n\n  return (\n    <header className=\"home-nav\" data-open={open}>\n      <div className=\"home-brand\">GTI Helpdesk</div>\n\n      <nav className=\"home-menu\" aria-label=\"Navegação principal\">\n        <Link href=\"/home\" className=\"active\" onClick={close}>Início</Link>\n        <a href=\"#\" onClick={close}>Tickets</a>\n        <a href=\"#\" onClick={close}>Relatórios</a>\n        <a href=\"#\" onClick={close}>Configurações</a>\n      </nav>\n\n      <button\n        className=\"menu-toggle\"\n        aria-label={open ? \"Fechar menu\" : \"Abrir menu\"}\n        aria-expanded={open}\n        aria-controls=\"mobile-nav\"\n        onClick={toggle}\n      >\n        <span className=\"bar\" />\n        <span className=\"bar\" />\n        <span className=\"bar\" />\n      </button>\n\n      <div className=\"home-profile\">\n        <span\n          className=\"avatar\"\n          role=\"button\"\n          tabIndex={0}\n          aria-label=\"Abrir perfil\"\n          onClick={() => router.push(\"/profile\")}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\" || e.key === \" \") router.push(\"/profile\");\n          }}\n        >\n          {user.name?.[0] ?? user.email[0]}\n        </span>\n        <div className=\"details\" />\n        <LogoutButton />\n      </div>\n\n      <nav id=\"mobile-nav\" className=\"mobile-nav\" aria-label=\"Navegação principal (mobile)\">\n        <Link href=\"/home\" className=\"active\" onClick={close}>Início</Link>\n        <a href=\"#\" onClick={close}>Tickets</a>\n        <a href=\"#\" onClick={close}>Relatórios</a>\n        <a href=\"#\" onClick={close}>Configurações</a>\n      </nav>\n    </header>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAUe,SAAS,UAAU,EAAE,IAAI,EAAS;IAC/C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,SAAS,IAAA,oNAAW,EAAC,IAAM,QAAQ,CAAC,IAAM,CAAC,IAAI,EAAE;IACvD,MAAM,QAAQ,IAAA,oNAAW,EAAC,IAAM,QAAQ,QAAQ,EAAE;IAElD,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,CAAC;YACb,IAAI,EAAE,GAAG,KAAK,UAAU;QAC1B;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG;QAAC;KAAM;IAEV,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW;YACf,IAAI,OAAO,UAAU,IAAI,KAAK;QAChC;QACA,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG;QAAC;KAAM;IAEV,qBACE,8OAAC;QAAO,WAAU;QAAW,aAAW;;0BACtC,8OAAC;gBAAI,WAAU;0BAAa;;;;;;0BAE5B,8OAAC;gBAAI,WAAU;gBAAY,cAAW;;kCACpC,8OAAC,uKAAI;wBAAC,MAAK;wBAAQ,WAAU;wBAAS,SAAS;kCAAO;;;;;;kCACtD,8OAAC;wBAAE,MAAK;wBAAI,SAAS;kCAAO;;;;;;kCAC5B,8OAAC;wBAAE,MAAK;wBAAI,SAAS;kCAAO;;;;;;kCAC5B,8OAAC;wBAAE,MAAK;wBAAI,SAAS;kCAAO;;;;;;;;;;;;0BAG9B,8OAAC;gBACC,WAAU;gBACV,cAAY,OAAO,gBAAgB;gBACnC,iBAAe;gBACf,iBAAc;gBACd,SAAS;;kCAET,8OAAC;wBAAK,WAAU;;;;;;kCAChB,8OAAC;wBAAK,WAAU;;;;;;kCAChB,8OAAC;wBAAK,WAAU;;;;;;;;;;;;0BAGlB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAU;wBACV,MAAK;wBACL,UAAU;wBACV,cAAW;wBACX,SAAS,IAAM,OAAO,IAAI,CAAC;wBAC3B,WAAW,CAAC;4BACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK,OAAO,IAAI,CAAC;wBACtD;kCAEC,KAAK,IAAI,EAAE,CAAC,EAAE,IAAI,KAAK,KAAK,CAAC,EAAE;;;;;;kCAElC,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC,8IAAY;;;;;;;;;;;0BAGf,8OAAC;gBAAI,IAAG;gBAAa,WAAU;gBAAa,cAAW;;kCACrD,8OAAC,uKAAI;wBAAC,MAAK;wBAAQ,WAAU;wBAAS,SAAS;kCAAO;;;;;;kCACtD,8OAAC;wBAAE,MAAK;wBAAI,SAAS;kCAAO;;;;;;kCAC5B,8OAAC;wBAAE,MAAK;wBAAI,SAAS;kCAAO;;;;;;kCAC5B,8OAAC;wBAAE,MAAK;wBAAI,SAAS;kCAAO;;;;;;;;;;;;;;;;;;AAIpC","debugId":null}}]
}