# ============================================
# RootDesk - Arquivo de Configuração de Ambiente
# ============================================
# Copie este arquivo para .env e ajuste as variáveis conforme necessário
# cp env.example .env

# ============================================
# Configuração Docker
# ============================================
# Escolha se deseja usar Docker para os serviços ou instalação nativa
# 
# DOCKER: Facilita o gerenciamento e isola os serviços (recomendado para desenvolvimento)
#         Requer Docker e Docker Compose instalados
#         Use: npm run docker:up para iniciar os serviços
#
# NATIVA: Instalação direta no sistema operacional (recomendado para produção)
#         Requer instalação manual do PostgreSQL e Ollama
#         Veja a documentação para instruções de instalação

# Usar Docker para o banco de dados PostgreSQL?
# true = Usa docker-compose.yml para subir o PostgreSQL 17
# false = Conecta-se a um banco de dados já instalado no sistema
USE_DOCKER_DB=true

# Usar Docker para o Ollama (IA local)?
# true = Usa docker-compose.yml para subir o Ollama
# false = Conecta-se a uma instalação nativa do Ollama
USE_DOCKER_OLLAMA=true

# ============================================
# Banco de Dados PostgreSQL
# ============================================
# O sistema utiliza PostgreSQL 17 como banco de dados padrão
#
# Formato da DATABASE_URL para PostgreSQL:
# postgresql://usuario:senha@host:5432/nome_banco?schema=public
#
# IMPORTANTE: 
# - Se USE_DOCKER_DB=true: Use localhost como host (o Docker mapeia a porta 5432)
# - Se USE_DOCKER_DB=false: Use o IP/host do servidor onde o PostgreSQL está instalado
# - O parâmetro schema=public é obrigatório para PostgreSQL
DATABASE_URL="postgresql://DB_USER:DB_PASSWORD@localhost:5432/DB_NAME?schema=public"
SHADOW_DATABASE_URL="postgresql://DB_USER:DB_PASSWORD@localhost:5432/shadow_db?schema=public"

# Configurações do Banco de Dados PostgreSQL
# Estas variáveis são usadas para construir a DATABASE_URL e pelo docker-compose.yml (se USE_DOCKER_DB=true)
#
# Se USE_DOCKER_DB=true:
#   - DB_HOST deve ser "localhost" (Docker mapeia a porta 5432)
#   - As credenciais serão usadas para criar o container PostgreSQL 17
#   - O container será criado automaticamente com o usuário e banco especificados
#
# Se USE_DOCKER_DB=false:
#   - DB_HOST deve ser o IP/hostname do servidor PostgreSQL
#   - DB_PORT deve ser 5432 (porta padrão do PostgreSQL)
#   - DB_USER, DB_PASSWORD, DB_NAME devem corresponder ao banco já instalado
#   - Certifique-se de que o usuário tem permissões adequadas no banco
DB_HOST=localhost
DB_USER=helpdesk_user
DB_PASSWORD=helpdesk_password
DB_NAME=helpdesk
# Porta do PostgreSQL
# IMPORTANTE: Se você já tem PostgreSQL rodando na porta 5432, use 5433 aqui
# O Docker mapeará a porta externa (5433) para a porta interna do container (5432)
DB_PORT=5433

# ============================================
# Autenticação
# ============================================
# Chave secreta para assinar tokens de autenticação JWT
# IMPORTANTE: Em produção, use uma string longa e aleatória (mínimo 32 caracteres)
# Você pode gerar uma usando: openssl rand -base64 32
AUTH_SECRET=your-secret-key-change-in-production-min-32-chars

# ============================================
# Usuário Padrão (para seed)
# ============================================
# Usuário administrador criado automaticamente na primeira execução
# IMPORTANTE: Altere estas credenciais em produção!
DEFAULT_USER_EMAIL=admin@example.com
DEFAULT_USER_PASSWORD=admin123
DEFAULT_USER_NAME=Administrador

# Habilitar autenticação de dois fatores (2FA) para o usuário padrão?
# true = 2FA obrigatório (recomendado para segurança)
# false = 2FA opcional (mais conveniente para desenvolvimento)
# Se não definido, será true por padrão
DEFAULT_USER_TWO_FACTOR=true #ativar somente se ja configurar o envio de email e com email valido

# ============================================
# Configurações de Email (SMTP)
# ============================================
# Habilitar/desabilitar envio de emails
EMAIL_ENABLED=false

# Servidor SMTP
# Para Gmail: smtp.gmail.com:587 (secure=false) ou :465 (secure=true)
# Para Outlook: smtp-mail.outlook.com:587
# Para SendGrid: smtp.sendgrid.net:587 (use API key como senha)
# Para Mailgun: smtp.mailgun.org:587
# Para Amazon SES: email-smtp.region.amazonaws.com:587
# Para cPanel/Webmail: mail.seudominio.com:465 (secure=true) ou :587 (secure=false)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false

# Credenciais SMTP
SMTP_USER=seu-email@gmail.com
SMTP_PASSWORD=sua-senha-de-app

# Email do remetente
EMAIL_FROM=noreply@rootdesk.com
EMAIL_FROM_NAME=RootDesk

# ============================================
# URLs do Sistema
# ============================================
# URL base do sistema (usado em links de email e outras referências)
# Em desenvolvimento: http://localhost:3000
# Em produção: https://seusistema.com
APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_URL=http://localhost:3000
PUBLIC_APP_URL=http://localhost:3000

# ============================================
# Ambiente
# ============================================
# Define o ambiente de execução: development, production, test
NODE_ENV=development

# ============================================
# Inteligência Artificial Local (Ollama/LocalAI)
# ============================================
# Quando ativado, o Dobby assistente virtual (Beta) usará o modelo local para humanizar respostas
# Veja docs/INSTALACAO_OLLAMA.md para instruções completas de instalação

# Habilitar/desabilitar IA local
LOCAL_AI_ENABLED=false

# URL do servidor Ollama
# IMPORTANTE:
# - Se USE_DOCKER_OLLAMA=true: Use http://localhost:11434 (Docker mapeia a porta)
# - Se USE_DOCKER_OLLAMA=false: Use http://localhost:11434 (se no mesmo servidor) ou http://IP_DO_SERVIDOR:11434
# - Se estiver em container Docker em outra rede: http://nome-do-container:11434
LOCAL_AI_URL=http://localhost:11434

# Modelo a ser usado (deve estar instalado no Ollama)
# Modelos recomendados: llama3:8b, mistral:7b, codellama:7b, phi3:mini
# Veja: ollama list (para listar modelos instalados)
LOCAL_AI_MODEL=llama3:8b

# Tempo máximo em milissegundos para aguardar resposta do modelo (opcional)
LOCAL_AI_TIMEOUT_MS=15000

# ============================================
# APIs de Transcrição de Áudio (Opcional)
# ============================================
# Configure pelo menos uma dessas APIs para habilitar transcrição de áudio no chat
# O sistema tentará usar na ordem: AssemblyAI > Deepgram > Google Speech-to-Text

# AssemblyAI (gratuito até 5 horas/mês)
# Obtenha em: https://www.assemblyai.com/
ASSEMBLYAI_API_KEY=

# Deepgram (gratuito até 12.000 minutos/mês)
# Obtenha em: https://deepgram.com/
DEEPGRAM_API_KEY=

# Google Speech-to-Text API
# Obtenha em: https://cloud.google.com/speech-to-text
GOOGLE_SPEECH_API_KEY=

# ============================================
# Criptografia
# ============================================
# Chave de criptografia para arquivos sensíveis (vault de senhas, etc)
# IMPORTANTE: Em produção, gere uma chave segura usando:
# node scripts/generate-encryption-key.js
# Ou use: openssl rand -hex 32
# A chave deve ter exatamente 64 caracteres hexadecimais
ENCRYPTION_KEY=your-encryption-key-here-change-in-production

# ============================================
# Operações Avançadas
# ============================================
# IMPORTANTE: Essas opções devem ser usadas com cautela, especialmente em produção

# Permitir atualização do sistema via git pull pela interface web
# Requer permissão de escrita no diretório do projeto
ALLOW_GIT_UPDATE=false

# URL do repositório Git permitido para atualização (opcional, mas recomendado para segurança)
# Se não definido, qualquer URL será aceito (quando ALLOW_GIT_UPDATE=true)
ALLOWED_REPO_URL=

# Permitir edição do arquivo .env pela interface web
# Requer permissão de escrita no arquivo .env
ALLOW_ENV_EDIT=false

# ============================================
# Docker (Configurações Adicionais)
# ============================================
# Estas configurações são usadas apenas quando USE_DOCKER_DB=true ou USE_DOCKER_OLLAMA=true

# Porta do servidor Ollama (usado pelo docker-compose.yml quando USE_DOCKER_OLLAMA=true)
# Se mudar, atualize também LOCAL_AI_URL para refletir a nova porta
LOCAL_AI_PORT=11434
